<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±æ³°è‡ªå‹•æ§åˆ¶è¡Œ - é›»å­ç¶­ä¿®å–®</title>
    <style>
        /* --- å…¨å±€è¨­å®š --- */
        body { font-family: "Microsoft JhengHei", "Heiti TC", sans-serif; padding: 20px; background-color: #f0f0f5; -webkit-print-color-adjust: exact; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        input, textarea { border: 1px solid #ddd; padding: 5px; font-size: 16px; width: 100%; box-sizing: border-box; font-family: inherit; }
        textarea { resize: vertical; min-height: 60px; }

        /* --- æŒ‰éˆ•å€ (åˆ—å°æ™‚éš±è—) --- */
        .no-print { margin-bottom: 20px; padding: 15px; background: #e8f4ff; border-radius: 8px; border: 1px solid #b6d4fe; }
        button { background-color: #007bff; color: white; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; margin-right: 5px; }
        button.delete-btn { background-color: #dc3545; padding: 5px 10px; font-size: 14px; }
        
        /* --- è¡¨é ­è³‡è¨Š --- */
        .header { text-align: center; position: relative; margin-bottom: 20px; }
        .en-title { font-size: 18px; font-weight: bold; letter-spacing: 2px; }
        
        /* ä¿®æ”¹é»ï¼šæ¨™é¡ŒåŠ å¤§ */
        .ch-title { font-size: 34px; font-weight: 900; margin: 5px 0; text-decoration: underline; letter-spacing: 2px; }
        
        .company-info { font-size: 13px; line-height: 1.5; }
        .order-no { position: absolute; right: 0; top: 0; font-size: 14px; text-align: right; }
        .order-no input { width: 100px; text-align: center; font-weight: bold; color: red; border: 1px solid #ccc; }

        /* --- ä¸»è¡¨æ ¼çµæ§‹ --- */
        table.main-table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
        table.main-table th, table.main-table td { border: 1px solid #000; padding: 8px; vertical-align: middle; }
        table.main-table th { background-color: #f0f0f0; text-align: center; font-weight: bold; white-space: nowrap; }

        /* æ•…éšœæè¿°å€å¡Š */
        .desc-label { width: 15%; background: #f0f0f0; text-align: center; font-weight: bold; border: 1px solid #000; vertical-align: middle;}
        .desc-content { width: 85%; border: 1px solid #000; padding: 5px; }
        
        /* é›¶ä»¶è¡¨æ ¼ */
        table.parts-table { width: 100%; border-collapse: collapse; margin-top: 5px; }
        table.parts-table th, table.parts-table td { border: 1px solid #000; padding: 6px; text-align: center; }
        table.parts-table th { background-color: #f0f0f0; }

        /* --- ç°½åå€ --- */
        .footer-section { display: flex; justify-content: space-between; margin-top: 15px; border: 1px solid #000; padding: 10px; }
        .sign-block { width: 48%; }
        .sign-title { font-weight: bold; margin-bottom: 5px; font-size: 16px; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        
        /* ç°½åç©ºç™½æ ¼ */
        .sign-box-blank {
            height: 80px; /* ç¨å¾®èª¿ä½é«˜åº¦ä»¥ç¯€çœç©ºé–“ */
            border: 1px solid #000; 
            background: #fff; 
            margin-top: 5px;
            position: relative;
        }
        .sign-box-blank::after {
            content: "(è«‹åœ¨æ­¤è™•ç°½å)";
            position: absolute;
            bottom: 5px;
            right: 5px;
            color: #ccc;
            font-size: 12px;
        }

        /* --- åˆ—å°å°ˆç”¨è¨­å®š (å¼·åˆ¶ä¸€é ) --- */
        @media print {
            @page {
                size: A4;
                margin: 8mm; /* è¨­å®šé‚Šè·ï¼Œé¿å…å¤ªå¯¬ */
            }
            body { background: white; padding: 0; margin: 0; }
            .container { 
                box-shadow: none; 
                padding: 0; 
                margin: 0; 
                width: 100%; 
                max-width: 100%; 
            }
            
            /* éš±è—ä¸å¿…è¦çš„å…ƒç´  */
            .no-print, .delete-btn, button { display: none !important; }
            
            /* å£“ç¸®é–“è·ç¢ºä¿ä¸€é  */
            input, textarea { border: none; padding: 0px; margin: 0; font-family: inherit; resize: none; background: transparent; }
            textarea { min-height: auto; overflow: hidden; } 
            table.main-table th, table.main-table td { padding: 4px; }
            table.parts-table th, table.parts-table td { padding: 4px; }
            .desc-content { padding: 2px; }
            .header { margin-bottom: 10px; }
            .footer-section { margin-top: 10px; padding: 5px; }
            
            /* è®“è¼¸å…¥æ¡†çœ‹èµ·ä¾†åƒå¡«åœ¨ç·šä¸Š */
            input[type="text"], input[type="number"], input[type="date"], input[type="time"] { font-weight: bold; color: #000; }
            
            /* å¼·åˆ¶åˆ—å°èƒŒæ™¯è‰² */
            th, .desc-label { background-color: #f0f0f0 !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="no-print">
        <h3>æ“ä½œé¢æ¿ (iPad å°ˆç”¨)</h3>
        <ul>
            <li>å¡«å…¥è³‡æ–™å¾Œï¼Œé»æ“Šä¸‹æ–¹ç¶ è‰²æŒ‰éˆ•ã€‚</li>
            <li>é è¦½ç•«é¢å‡ºç¾å¾Œï¼Œç”¨å…©æŒ‡<strong>ã€Œæ”¾å¤§é è¦½åœ–ã€</strong>ï¼Œå†é»å³ä¸Šè§’åˆ†äº«åœ–ç¤ºï¼Œé¸æ“‡<strong>ã€Œå„²å­˜åˆ°æª”æ¡ˆã€</strong>å³å¯å­˜ç‚º PDFã€‚</li>
        </ul>
        <button onclick="addPartRow()">+ æ–°å¢é›¶ä»¶</button>
        <button onclick="window.print()" style="background-color: #28a745;">ğŸ–¨ï¸ ç”Ÿæˆç¶­ä¿®å–® (PDF)</button>
    </div>

    <div class="header">
        <div class="order-no">
            ç¶­ä¿®å–®è™Ÿ: <input type="text" value="003502">
        </div>
        <div class="en-title">INTAI AUTO CONTROL</div>
        <div class="ch-title">è‹±æ³°è‡ªå‹•æ§åˆ¶è¡Œ</div>
        <div class="company-info">
            åœ°å€:å½°åŒ–ç¸£å“¡æ—å¸‚å“¡é›†è·¯2æ®µ493å··4å¼„10è™Ÿ<br>
            é›»è©±:04-8356923 &nbsp; æ‰‹æ©Ÿ:0935-435757 &nbsp; å‚³çœŸ:04-8341151 &nbsp; çµ±ç·¨:45229579
        </div>
    </div>

    <table class="main-table">
        <tr>
            <th width="15%">å®¢æˆ¶åç¨±</th>
            <td width="35%"><input type="text" placeholder="è¼¸å…¥å®¢æˆ¶åç¨±"></td>
            <th width="15%">æ©Ÿå™¨ç·¨è™Ÿ</th>
            <td width="35%"><input type="text" placeholder="è¼¸å…¥ç·¨è™Ÿ"></td>
        </tr>
        <tr>
            <th>æ—¥ æœŸ</th>
            <td><input type="date" id="dateField"></td>
            <th>æ™‚ é–“</th>
            <td style="padding: 0;">
                <div style="display: flex; align-items: center; height: 100%; padding: 5px;">
                     <input type="time" style="width: 45%; text-align: center;"> 
                     <span style="margin: 0 5px;">è‡³</span>
                     <input type="time" style="width: 45%; text-align: center;">
                </div>
            </td>
        </tr>
    </table>

    <table class="main-table">
        <tr>
            <td class="desc-label">æ•…éšœå•é¡Œ</td>
            <td class="desc-content">
                <textarea rows="3" placeholder="æè¿°æ•…éšœæƒ…å½¢..."></textarea>
            </td>
        </tr>
        <tr>
            <td class="desc-label">æ•…éšœåŸå› </td>
            <td class="desc-content">
                <textarea rows="3" placeholder="æª¢æ¸¬åŸå› ..."></textarea>
            </td>
        </tr>
        <tr>
            <td class="desc-label">è™•ç†å°ç­–<br>åŠ<br>å»ºè­°äº‹é …</td>
            <td class="desc-content">
                <textarea rows="4" placeholder="è™•ç†æ–¹å¼èˆ‡å»ºè­°..."></textarea>
            </td>
        </tr>
    </table>

    <table class="parts-table" id="partsTable">
        <thead>
            <tr>
                <th width="25%">é›¶ä»¶åç¨±</th>
                <th width="20%">è¦ æ ¼</th>
                <th width="10%">æ•¸é‡</th>
                <th width="15%">å–® åƒ¹</th>
                <th width="15%">ç¸½ è¨ˆ</th>
                <th width="10%">å‚™ è¨»</th>
                <th width="5%" class="no-print"></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="text"></td>
                <td><input type="text"></td>
                <td><input type="number" class="qty" value="1" oninput="calcTotal(this)"></td>
                <td><input type="number" class="price" oninput="calcTotal(this)"></td>
                <td><input type="text" class="subtotal" readonly></td>
                <td><input type="text"></td>
                <td class="no-print"><button class="delete-btn" onclick="deleteRow(this)">x</button></td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4" style="text-align: right; font-weight: bold; padding-right: 10px;">åˆ è¨ˆ:</td>
                <td><input type="text" id="grandTotal" style="text-align: center; font-weight: bold; color: blue;" readonly value="0"></td>
                <td colspan="2"></td>
            </tr>
        </tfoot>
    </table>

    <div class="footer-section">
        <div class="sign-block">
            <div class="sign-title">å®¢æˆ¶ç°½å:</div>
            <div>
                ç°½åä»£è¡¨: <input type="text" placeholder="è¼¸å…¥å§“å" style="width: 60%; border-bottom: 1px solid #000; display: inline-block;">
            </div>
            <div class="sign-box-blank"></div>
        </div>
        
        <div class="sign-block" style="border-left: 1px solid #ccc; padding-left: 15px;">
            <div class="sign-title">è™•ç†äººå“¡:</div>
            <div style="margin-top: 10px;">
                æ‰¿è¾¦äººå“¡: <input type="text" value="æœ±æ–‡è¨€" style="width: 60%; border-bottom: 1px solid #000; display: inline-block;">
            </div>
            <div style="margin-top: 40px; text-align: center; color: #999; font-size: 14px;">
                ( è‹±æ³°è‡ªå‹•æ§åˆ¶è¡Œ )
            </div>
        </div>
    </div>
</div>

<script>
    // 1. åˆå§‹åŒ–æ—¥æœŸ
    document.getElementById('dateField').valueAsDate = new Date();

    // 2. è‡ªå‹•è¨ˆç®—é‚è¼¯
    function calcTotal(input) {
        const row = input.closest('tr');
        const qty = parseFloat(row.querySelector('.qty').value) || 0;
        const price = parseFloat(row.querySelector('.price').value) || 0;
        const total = Math.round(qty * price);
        
        row.querySelector('.subtotal').value = total > 0 ? total : '';
        updateGrandTotal();
    }

    function updateGrandTotal() {
        let sum = 0;
        document.querySelectorAll('.subtotal').forEach(el => {
            sum += parseFloat(el.value) || 0;
        });
        document.getElementById('grandTotal').value = sum;
    }

    function addPartRow() {
        const tbody = document.querySelector('#partsTable tbody');
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><input type="text"></td>
            <td><input type="text"></td>
            <td><input type="number" class="qty" value="1" oninput="calcTotal(this)"></td>
            <td><input type="number" class="price" oninput="calcTotal(this)"></td>
            <td><input type="text" class="subtotal" readonly></td>
            <td><input type="text"></td>
            <td class="no-print"><button class="delete-btn" onclick="deleteRow(this)">x</button></td>
        `;
        tbody.appendChild(tr);
    }

    function deleteRow(btn) {
        btn.closest('tr').remove();
        updateGrandTotal();
    }
</script>

</body>
</html>